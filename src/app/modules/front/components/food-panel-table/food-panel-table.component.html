<table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z8 food-table"
>
    <ng-container matColumnDef="{{displayedColumns[0]}}">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[0] + '_' + i
                    }"
                    (click)="edit(i, displayedColumns[0])"
                >
                    {{element.itemName}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[0] + '_' + i"
                    [ngClass]="{
                        'food-table__field-input': true
                    }"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.itemName }}"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[1]}}">
        <th mat-header-cell *matHeaderCellDef>Б<span class="vm__mobile-hide">елки</span></th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[1] + '_' + i
                    }"
                    (click)="edit(i, displayedColumns[1])"
                >
                    {{element.nutrients.protein}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[1] + '_' + i"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.nutrients.protein }}"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[2]}}">
        <th mat-header-cell *matHeaderCellDef>У<span class="vm__mobile-hide">глеводы</span></th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[2] + '_' + i
                    }"
                    (click)="edit(i, displayedColumns[2])"
                >
                    {{element.nutrients.carbs}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[2] + '_' + i"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.nutrients.carbs }}"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[3]}}">
        <th mat-header-cell *matHeaderCellDef>Ж<span class="vm__mobile-hide">иры</span></th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[3] + '_' + i
                    }"
                    (click)="edit(i, displayedColumns[3])"
                >
                    {{element.nutrients.fat}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[3] + '_' + i"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.nutrients.fat }}"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[4]}}">
        <th mat-header-cell *matHeaderCellDef>К<span class="vm__mobile-hide">алории</span></th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[4] + '_' + i
                    }"
                    (click)="edit(i, displayedColumns[4])"
                >
                    {{element.nutrients.calories}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[4] + '_' + i"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.nutrients.calories }}"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="add">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
            <button mat-button>
                <mat-icon class="example-icon" aria-hidden="false" aria-label="Example user verified icon">add_circle</mat-icon>
            </button>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="remove">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
            <button
                mat-button
                (click)="deleteRow(element)"
                [attr.data-rowID]="element.id"
            >
                <mat-icon
                        class="example-icon"
                        aria-hidden="false"
                        aria-label="Example user verified icon"
                >
                    delete
                </mat-icon>
            </button>
        </td>
    </ng-container>
    
    <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
    ></tr>
    <tr
        mat-row
        *matRowDef="let row; let ind = index; columns: displayedColumns;"
        [ngClass]="{'lalka': foodForOnePanel.group[ind].id == rowIndex ? true : false}"
    ></tr>
</table>