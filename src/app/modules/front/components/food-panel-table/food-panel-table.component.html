<table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z8 food-table"
>
    <ng-container matColumnDef="{{displayedColumns[0]}}">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': false
                    }"
                    (click)="edit(element, displayedColumns[0])"
                >
                    {{element.itemName}}
                </span>
                <input
                    *ngIf="false"
                    [ngClass]="{
                        'food-table__field-input': true
                    }"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.name }}"
                    [attr.data-panel-id]="element.panelID"
                    [attr.data-group-id]="element.groupID"
                    [attr.data-item-id]="element.itemID"
                    [attr.data-item-name]="displayedColumns[0]"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[1]}}">
        <th mat-header-cell *matHeaderCellDef>Б<span class="vm__mobile-hide">елки</span></th>
        <td mat-cell *matCellDef="let element">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': false
                    }"
                    (click)="edit(element, displayedColumns[1])"
                >
                    {{element.nutrients.protein}}
                </span>
                <input
                    *ngIf="false"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.protein }}"
                    [attr.data-panel-id]="element.panelID"
                    [attr.data-group-id]="element.groupID"
                    [attr.data-item-id]="element.itemID"
                    [attr.data-item-name]="displayedColumns[1]"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[2]}}">
        <th mat-header-cell *matHeaderCellDef>У<span class="vm__mobile-hide">глеводы</span></th>
        <td mat-cell *matCellDef="let element">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': false
                    }"
                    (click)="edit(element, displayedColumns[2])"
                >
                    {{element.nutrients.carbs}}
                </span>
                <input
                    *ngIf="false"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.carbs }}"
                    [attr.data-panel-id]="element.panelID"
                    [attr.data-group-id]="element.groupID"
                    [attr.data-item-id]="element.itemID"
                    [attr.data-item-name]="displayedColumns[2]"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[3]}}">
        <th mat-header-cell *matHeaderCellDef>Ж<span class="vm__mobile-hide">иры</span></th>
        <td mat-cell *matCellDef="let element">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[3] + '_' + element.id
                    }"
                    (click)="edit(element, displayedColumns[3])"
                >
                    {{element.nutrients.fat}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[3] + '_' + element.id"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.fat }}"
                    [attr.data-panel-id]="element.panelID"
                    [attr.data-group-id]="element.groupID"
                    [attr.data-item-id]="element.itemID"
                    [attr.data-item-name]="displayedColumns[3]"
                >
            </div>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="{{displayedColumns[4]}}">
        <th mat-header-cell *matHeaderCellDef>К<span class="vm__mobile-hide">алории</span></th>
        <td mat-cell *matCellDef="let element">
            <div class="food-table__field">
                <span
                    [ngClass]="{
                        'food-table__field-name': true,
                        'vm__hide': currentElement === displayedColumns[4] + '_' + element.id
                    }"
                    (click)="edit(element, displayedColumns[4])"
                >
                    {{element.nutrients.calories}}
                </span>
                <input
                    *ngIf="currentElement === displayedColumns[4] + '_' + element.id"
                    [ngClass]="{'food-table__field-input': true}"
                    [appAutoFocus]
                    (blur)="checkIsEmpty($event)"
                    (keyup.enter)="checkIsEmpty($event)"
                    placeholder="{{ element.calories }}"
                    [attr.data-panel-id]="element.panelID"
                    [attr.data-group-id]="element.groupID"
                    [attr.data-item-id]="element.itemID"
                    [attr.data-item-name]="displayedColumns[4]"
                >
            </div>
            <!--currentFieldID === element.caloriesID-->
        </td>
    </ng-container>
    
    <ng-container matColumnDef="add">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
            <button mat-button>
                <mat-icon class="example-icon" aria-hidden="false" aria-label="Example user verified icon">add_circle</mat-icon>
            </button>
        </td>
    </ng-container>
    
    <ng-container matColumnDef="remove">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
            <button mat-button>
                <mat-icon class="example-icon" aria-hidden="false" aria-label="Example user verified icon">delete</mat-icon>
            </button>
        </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>